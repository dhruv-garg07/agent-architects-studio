<!DOCTYPE html>
<html>
<head>
  <title>Redirecting...</title>
</head>
<body>
  <p>Logging you in...</p>
  <script>
    const fragment = new URLSearchParams(window.location.hash.slice(1));
    const access_token = fragment.get("access_token");
    const refresh_token = fragment.get("refresh_token");

    if (access_token) {
      fetch("/auth/callback", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ access_token, refresh_token })
      }).then(() => {
        window.location.href = "/"; // homepage
      });
    } else {
      window.location.href = "/auth"; // fallback
    }
  </script>
</body>
</html>

{% extends "base.html" %}

{% block title %}{{ profile.full_name }}'s Profile{% endblock %}

{% block content %}
<div class="min-h-screen bg-background py-8">
    <div class="container mx-auto max-w-4xl p-4 sm:p-6 lg:p-8">
        <!-- Profile Card with Technical Aesthetic -->
        <div class="card card-elevated overflow-hidden">
            <div class="p-8 md:p-12">
                <div class="md:flex md:items-start md:justify-between">
                    <!-- Main Profile Info -->
                    <div class="flex items-start space-x-6">
                        <!-- Avatar -->
                        <div class="flex-shrink-0">
                            <div class="w-24 h-24 rounded-full bg-secondary flex items-center justify-center border-2 border-primary/20">
                                <i data-lucide="user" class="w-12 h-12 text-muted-foreground"></i>
                            </div>
                        </div>
                        
                        <div>
                            <h1 class="text-3xl font-bold text-foreground">{{ profile.full_name }}</h1>
                            <p class="text-lg mt-1 text-muted-foreground">@{{ profile.username }}</p>
                            
                            <span class="mt-4 inline-block text-sm font-semibold px-3 py-1 rounded-full badge 
                                {% if profile.user_role == 'creator' %} badge-ai-1 {% else %} badge-ai-2 {% endif %}">
                                {{ profile.user_role | capitalize }}
                            </span>
                        </div>
                    </div>

                    <!-- Edit Profile Button (Conditional) -->
                    {% if is_own_profile %}
                    <div class="mt-6 md:mt-0">
                        <a href="{{ url_for('edit_profile') }}" class="btn-primary inline-flex items-center">
                            <i data-lucide="edit-3" class="w-4 h-4 mr-2"></i>
                            Edit Profile
                        </a>
                    </div>
                    {% endif %}
                </div>

                <div class="data-line my-8"></div>

                <!-- Role-Specific Information -->
                <div class="space-y-6">
                    <!-- Creator-Specific Fields -->
                    {% if profile.user_role == 'creator' %}
                        {% if profile.portfolio_url %}
                        <div class="flex items-start measurement">
                            <i data-lucide="link" class="w-5 h-5 text-primary mr-4 flex-shrink-0 mt-0.5"></i>
                            <div>
                                <h3 class="text-sm font-medium text-muted-foreground">Portfolio / Website</h3>
                                <a href="{{ profile.portfolio_url }}" target="_blank" rel="noopener noreferrer" class="text-primary hover:underline break-all">
                                    {{ profile.portfolio_url }}
                                </a>
                            </div>
                        </div>
                        {% endif %}

                        {% if profile.expertise %}
                        <div class="flex items-start measurement">
                            <i data-lucide="award" class="w-5 h-5 text-primary mr-4 flex-shrink-0 mt-0.5"></i>
                            <div>
                                <h3 class="text-sm font-medium text-muted-foreground">Areas of Expertise</h3>
                                <p class="text-foreground">{{ profile.expertise }}</p>
                            </div>
                        </div>
                        {% endif %}
                    {% endif %}

                    <!-- User-Specific Fields -->
                    {% if profile.user_role == 'user' %}
                        {% if profile.primary_interest %}
                        <div class="flex items-start measurement">
                            <i data-lucide="star" class="w-5 h-5 text-primary mr-4 flex-shrink-0 mt-0.5"></i>
                            <div>
                                <h3 class="text-sm font-medium text-muted-foreground">Primary Interest</h3>
                                <p class="text-foreground capitalize">{{ profile.primary_interest.replace('_', ' ') }}</p>
                            </div>
                        </div>
                        {% endif %}
                    {% endif %}

                    <!-- Common Fields -->
                    <div class="flex items-start measurement">
                        <i data-lucide="calendar" class="w-5 h-5 text-primary mr-4 flex-shrink-0 mt-0.5"></i>
                        <div>
                            <h3 class="text-sm font-medium text-muted-foreground">Member Since</h3>
                            <p class="text-foreground">{{ profile.created_at.split('T')[0] }}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Additional Stats Section (if creator) -->
        {% if profile.user_role == 'creator' %}
        <div class="mt-8 grid grid-cols-1 md:grid-cols-3 gap-6">
            <!-- Agents Card -->
            <div class="card p-6 text-center ai-connection">
                <div class="text-3xl font-bold text-ai-1">12</div>
                <div class="text-muted-foreground mt-2">Agents Created</div>
            </div>
            
            <!-- Reputation Card -->
            <div class="card p-6 text-center ai-connection">
                <div class="text-3xl font-bold text-ai-2">4.8</div>
                <div class="text-muted-foreground mt-2">Avg Rating</div>
            </div>
            
            <!-- Runs Card -->
            <div class="card p-6 text-center ai-connection">
                <div class="text-3xl font-bold text-ai-3">1.2K</div>
                <div class="text-muted-foreground mt-2">Total Runs</div>
            </div>
        </div>
        
        <!-- View Agents Button -->
        <div class="mt-8 text-center">
            <a href="/creators?search={{profile.fullname}}&sort_by=reputation" class="btn-secondary inline-flex items-center">
                <i data-lucide="eye" class="w-4 h-4 mr-2"></i>
                View Agents
            </a>
        </div>
        {% endif %}
    </div>
</div>

<!-- Initialize Lucide Icons -->
<script>
    lucide.createIcons();
</script>
{% endblock %}
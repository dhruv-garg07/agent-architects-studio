{% extends "base.html" %}

{% block title %}Creator Studio - Submit AI Agent{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Header -->
    <div class="mb-8">
        <h1 class="text-3xl font-bold text-foreground mb-4">Creator Studio</h1>
        <p class="text-lg text-muted-foreground">
            Submit your AI agent to the marketplace
        </p>
    </div>

    <!-- Agent Submission Form -->
    <div class="card p-6">
        <form method="POST" action="{{ url_for('submit_agent') }}" class="space-y-6">
            <!-- Basic Information -->
            <div>
                <h2 class="text-xl font-semibold text-foreground mb-4">Basic Information</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="name" class="block text-sm font-medium text-foreground mb-2">
                            Agent Name *
                        </label>
                        <input type="text" 
                               id="name" 
                               name="name" 
                               required
                               placeholder="My Amazing AI Agent"
                               class="input w-full">
                    </div>
                    <div>
                        <label for="category" class="block text-sm font-medium text-foreground mb-2">
                            Category *
                        </label>
                        <select id="category" name="category" required class="input w-full">
                            <option value="">Select a category</option>
                            <option value="automation">Automation</option>
                            <option value="content">Content Creation</option>
                            <option value="analysis">Data Analysis</option>
                            <option value="customer-service">Customer Service</option>
                            <option value="productivity">Productivity</option>
                            <option value="research">Research</option>
                            <option value="education">Education</option>
                            <option value="finance">Finance</option>
                        </select>
                    </div>
                </div>
                
                <div class="mt-4">
                    <label for="description" class="block text-sm font-medium text-foreground mb-2">
                        Description *
                    </label>
                    <textarea id="description" 
                              name="description" 
                              required
                              rows="4"
                              placeholder="Describe what your agent does, its capabilities, and use cases..."
                              class="input w-full resize-none"></textarea>
                </div>
            </div>

            <!-- API Configuration -->
            <div>
                <h2 class="text-xl font-semibold text-foreground mb-4">API Configuration</h2>
                
                <!-- Base URL (Compulsory) -->
                <div class="mb-4">
                    <label for="base_url" class="block text-sm font-medium text-foreground mb-2">
                        Base URL *
                    </label>
                    <input type="url" 
                           id="base_url" 
                           name="base_url" 
                           required
                           placeholder="https://api.example.com/v1/"
                           class="input w-full">
                </div>
                
                <!-- Headers -->
                <div class="mb-4">
                    <label class="block text-sm font-medium text-foreground mb-2">
                        Headers
                    </label>
                    <div id="headers-container" class="space-y-2">
                        <div class="flex gap-2 header-field">
                            <input type="text" 
                                   name="header_keys[]" 
                                   placeholder="Header name"
                                   class="input flex-1">
                            <input type="text" 
                                   name="header_values[]" 
                                   placeholder="Header value"
                                   class="input flex-1">
                            <button type="button" class="btn-secondary remove-header" style="display: none;">
                                <i data-lucide="trash-2" class="w-4 h-4"></i>
                            </button>
                        </div>
                    </div>
                    <button type="button" id="add-header" class="btn-secondary mt-2">
                        <i data-lucide="plus" class="w-4 h-4 mr-1"></i> Add Header
                    </button>
                </div>
                
                <!-- Content Type (Compulsory) -->
                <div class="mb-4">
                    <label for="content_type" class="block text-sm font-medium text-foreground mb-2">
                        Content-Type *
                    </label>
                    <select id="content_type" name="content_type" required class="input w-full">
                        <option value="application/json">application/json</option>
                        <option value="text/plain">text/plain</option>
                        <option value="application/xml">application/xml</option>
                        <option value="application/x-www-form-urlencoded">application/x-www-form-urlencoded</option>
                    </select>
                </div>
                
                
                <!-- Authentication -->
                <div class="mb-4">
                    <label class="block text-sm font-medium text-foreground mb-2">
                        Authentication
                    </label>
                    <div id="auth-container" class="space-y-2">
                        <div class="flex gap-2 auth-field">
                            <input type="text" 
                                   name="auth_keys[]" 
                                   placeholder="Key (e.g., Authorization)"
                                   class="input flex-1">
                            <input type="text" 
                                   name="auth_values[]" 
                                   placeholder="Value (e.g., Bearer token)"
                                   class="input flex-1">
                            <button type="button" class="btn-secondary remove-auth" style="display: none;">
                                <i data-lucide="trash-2" class="w-4 h-4"></i>
                            </button>
                        </div>
                    </div>
                    <button type="button" id="add-auth" class="btn-secondary mt-2">
                        <i data-lucide="plus" class="w-4 h-4 mr-1"></i> Add Auth Field
                    </button>
                </div>
                
                <!-- Data Format (Compulsory) -->
                <div class="mb-4">
                    <label for="data_format" class="block text-sm font-medium text-foreground mb-2">
                        Data Format
                    </label>
                    <select id="data_format" name="data_format" required class="input w-full">
                        <option value="json">JSON</option>
                        <option value="text">Plain Text</option>
                        <option value="xml">XML</option>
                        <option value="form-data">Form Data</option>
                    </select>
                </div>
                
                <!-- Data Structure -->
                <div>
                    <label for="data_structure" required class="block text-sm font-medium text-foreground mb-2">
                        Data Structure * (e.g., input, prompt, message, body)
                    </label>
                    <textarea id="data_structure" 
                              name="data_structure" 
                              rows="4"
                              placeholder='Example: {"input": "user_message", "parameters": {}}'
                              class="input w-full resize-none"></textarea>
                    <p class="text-xs text-muted-foreground mt-1">
                        Describe the expected request format for your API
                    </p>
                </div>
            </div>

            <!-- Technical Specifications -->
            <div>
                <h2 class="text-xl font-semibold text-foreground mb-4">Technical Specifications</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="tags" class="block text-sm font-medium text-foreground mb-2">
                            Tags
                        </label>
                        <input type="text" 
                               id="tags" 
                               name="tags" 
                               placeholder="ai, automation, chatbot (comma-separated)"
                               class="input w-full">
                        <p class="text-xs text-muted-foreground mt-1">
                            Separate tags with commas
                        </p>
                    </div>
                </div>
            </div>

            <!-- Capabilities & Modalities -->
            <div>
                <h2 class="text-xl font-semibold text-foreground mb-4">Capabilities & Modalities</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Capabilities -->
                    <div>
                        <label class="block text-sm font-medium text-foreground mb-3">
                            Capabilities
                        </label>
                        <div class="space-y-2">
                            {% for capability in ['text-generation', 'text-analysis', 'conversation', 'summarization', 'translation', 'code-generation', 'data-processing', 'image-analysis', 'audio-processing'] %}
                                <div class="flex items-center">
                                    <input type="checkbox" 
                                           id="cap_{{ capability }}" 
                                           name="capabilities" 
                                           value="{{ capability }}"
                                           class="mr-2">
                                    <label for="cap_{{ capability }}" class="text-sm text-foreground capitalize">
                                        {{ capability.replace('-', ' ') }}
                                    </label>
                                </div>
                            {% endfor %}
                        </div>
                    </div>

                    <!-- Modalities -->
                    <div>
                        <label class="block text-sm font-medium text-foreground mb-3">
                            Modalities
                        </label>
                        <div class="space-y-2">
                            {% for modality in ['text', 'image', 'audio', 'video', 'multimodal'] %}
                                <div class="flex items-center">
                                    <input type="checkbox" 
                                           id="mod_{{ modality }}" 
                                           name="modalities" 
                                           value="{{ modality }}"
                                           class="mr-2">
                                    <label for="mod_{{ modality }}" class="text-sm text-foreground capitalize">
                                        {{ modality }}
                                    </label>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>

            <!-- Terms and Submission -->
            <div class="border-t border-border pt-6">
                <div class="flex items-start mb-6">
                    <input type="checkbox" id="terms" name="terms" required class="mr-3 mt-1">
                    <label for="terms" class="text-sm text-muted-foreground">
                        I agree to the <a href="#" class="text-primary hover:underline">Terms of Service</a> 
                        and confirm that this agent complies with the 
                        <a href="#" class="text-primary hover:underline">Community Guidelines</a>. 
                        I understand that my submission will be reviewed before publication.
                    </label>
                </div>

                <div class="flex flex-col sm:flex-row gap-4">
                    <button type="submit" class="btn-primary flex-1">
                        <i data-lucide="upload" class="w-4 h-4 mr-2"></i>
                        Submit Agent for Review
                    </button>
                    <button type="button" class="btn-secondary" onclick="window.history.back()">
                        <i data-lucide="x" class="w-4 h-4 mr-2"></i>
                        Cancel
                    </button>
                </div>
            </div>
        </form>
    </div>

    <!-- Submission Guidelines -->
    <div class="mt-8 card p-6">
        <h2 class="text-xl font-semibold text-foreground mb-4">Submission Guidelines</h2>
        <div class="space-y-4 text-sm text-muted-foreground">
            <div class="flex items-start">
                <i data-lucide="check-circle" class="w-5 h-5 text-primary mr-3 mt-0.5 flex-shrink-0"></i>
                <div>
                    <strong class="text-foreground">Quality Code:</strong> 
                    Ensure your agent is well-documented, tested, and follows best practices.
                </div>
            </div>
            <div class="flex items-start">
                <i data-lucide="check-circle" class="w-5 h-5 text-primary mr-3 mt-0.5 flex-shrink-0"></i>
                <div>
                    <strong class="text-foreground">Clear Documentation:</strong> 
                    Provide comprehensive README with setup instructions and usage examples.
                </div>
            </div>
            <div class="flex items-start">
                <i data-lucide="check-circle" class="w-5 h-5 text-primary mr-3 mt-0.5 flex-shrink-0"></i>
                <div>
                    <strong class="text-foreground">Ethical Use:</strong> 
                    Agents must not promote harmful, illegal, or unethical activities.
                </div>
            </div>
            <div class="flex items-start">
                <i data-lucide="check-circle" class="w-5 h-5 text-primary mr-3 mt-0.5 flex-shrink-0"></i>
                <div>
                    <strong class="text-foreground">Original Work:</strong> 
                    Submit only your original creations or properly attributed collaborative work.
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Header management
    const headersContainer = document.getElementById('headers-container');
    const addHeaderBtn = document.getElementById('add-header');
    
    addHeaderBtn.addEventListener('click', function() {
        const newHeader = document.createElement('div');
        newHeader.className = 'flex gap-2 header-field';
        newHeader.innerHTML = `
            <input type="text" name="header_keys[]" placeholder="Header name" class="input flex-1">
            <input type="text" name="header_values[]" placeholder="Header value" class="input flex-1">
            <button type="button" class="btn-secondary remove-header">
                <i data-lucide="trash-2" class="w-4 h-4"></i>
            </button>
        `;
        headersContainer.appendChild(newHeader);
        
        // Add event listener to the new remove button
        newHeader.querySelector('.remove-header').addEventListener('click', function() {
            headersContainer.removeChild(newHeader);
        });
        
        // Initialize Lucide icons for the new button
        if (window.lucide) {
            window.lucide.createIcons();
        }
    });
    
    // Auth management
    const authContainer = document.getElementById('auth-container');
    const addAuthBtn = document.getElementById('add-auth');
    
    addAuthBtn.addEventListener('click', function() {
        const newAuth = document.createElement('div');
        newAuth.className = 'flex gap-2 auth-field';
        newAuth.innerHTML = `
            <input type="text" name="auth_keys[]" placeholder="Key (e.g., Authorization)" class="input flex-1">
            <input type="text" name="auth_values[]" placeholder="Value (e.g., Bearer token)" class="input flex-1">
            <button type="button" class="btn-secondary remove-auth">
                <i data-lucide="trash-2" class="w-4 h-4"></i>
            </button>
        `;
        authContainer.appendChild(newAuth);
        
        // Add event listener to the new remove button
        newAuth.querySelector('.remove-auth').addEventListener('click', function() {
            authContainer.removeChild(newAuth);
        });
        
        // Initialize Lucide icons for the new button
        if (window.lucide) {
            window.lucide.createIcons();
        }
    });
    
    // Add event listeners to existing remove buttons (if any)
    document.querySelectorAll('.remove-header').forEach(btn => {
        btn.addEventListener('click', function() {
            headersContainer.removeChild(btn.parentElement);
        });
    });
    
    document.querySelectorAll('.remove-auth').forEach(btn => {
        btn.addEventListener('click', function() {
            authContainer.removeChild(btn.parentElement);
        });
    });
});
</script>
{% endblock %}